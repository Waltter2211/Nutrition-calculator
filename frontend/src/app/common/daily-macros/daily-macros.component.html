<div class="main-div">
  @if (isError) {
  <app-error></app-error>
  } @else {
  <div class="buttons-div">
    <div>
      <input type="date" [max]="currentDate" [(ngModel)]="findDate" />
      <button (click)="onClick()">Click</button>
    </div>

    <p>{{ userData.dailyNutrients.addedDate }}</p>
    <p>Meals list</p>
  </div>
  <div class="holder-div">
    <div class="macro-cards-div">
      <div class="macro-card">
        @if (userData.dailyNutrients.dailyCalories >= userData.goalCalories) {
        <p>Daily goal reached</p>
        <p>
          {{
            (userData.goalCalories - userData.dailyNutrients.dailyCalories) *
              -1
          }}kcal of calories over daily goal
        </p>
        } @else {
          <p>Calories</p>
          <div class="progress-bar-div">
            <div class="progress-bar-text">{{ userData.dailyNutrients.dailyCalories }}/{{ userData.goalCalories }}kcal</div>
            <round-progress [current]="userData.dailyNutrients.dailyCalories"
            [max]="userData.goalCalories" [color]="'coral'"
            [background]="'#eaeaea'" [radius]="100" [stroke]="20"
            [semicircle]="true" [rounded]="false" [clockwise]="true"
            [responsive]="false" [duration]="800" [animation]="'easeInOutQuart'"
            [animationDelay]="0" />
          </div>
        <!-- <div class="progress-bar-edges">
          <div class="progress-bar-inside"></div>
        </div> -->
        }
      </div>
      <div class="macro-card">
        @if (userData.dailyNutrients.dailyProteins >= userData.goalProteins) {
        <p>Daily goal reached</p>
        <p>
          {{
            (userData.goalProteins - userData.dailyNutrients.dailyProteins) *
              -1
          }}g of proteins over daily goal
        </p>
        } @else {
          <p>Proteins</p>
          <div class="progress-bar-div">
            <div class="progress-bar-text">{{ userData.dailyNutrients.dailyProteins }}/{{ userData.goalProteins }}g</div>
            <round-progress [current]="userData.dailyNutrients.dailyProteins"
            [max]="userData.goalProteins" [color]="'orange'"
            [background]="'#eaeaea'" [radius]="100" [stroke]="20"
            [semicircle]="true" [rounded]="false" [clockwise]="true"
            [responsive]="false" [duration]="800" [animation]="'easeInOutQuart'"
            [animationDelay]="0" />
          </div>
        }
      </div>
      <div class="macro-card">
        @if (userData.dailyNutrients.dailyCarbohydrates >=
        userData.goalCarbohydrates) {
        <p>Daily goal reached</p>
        <p>
          {{
            (userData.goalCarbohydrates -
              userData.dailyNutrients.dailyCarbohydrates) *
              -1
          }}g of carbohydrates over daily goal
        </p>
        } @else {
          <p>Carbohydrates</p>
          <div class="progress-bar-div">
            <div class="progress-bar-text">{{ userData.dailyNutrients.dailyCarbohydrates }}/{{ userData.goalCarbohydrates }}g</div>
            <round-progress [current]="userData.dailyNutrients.dailyCarbohydrates"
            [max]="userData.goalCarbohydrates" [color]="'lightblue'"
            [background]="'#eaeaea'" [radius]="100" [stroke]="20"
            [semicircle]="true" [rounded]="false" [clockwise]="true"
            [responsive]="false" [duration]="800" [animation]="'easeInOutQuart'"
            [animationDelay]="0" />
          </div>
        }
      </div>
      <div class="macro-card">
        @if (userData.dailyNutrients.dailyFats >= userData.goalFats) {
        <p>Daily goal reached</p>
        <p>
          {{ (userData.goalFats - userData.dailyNutrients.dailyFats) * -1 }}g of
          fats over daily goal
        </p>
        } @else {
          <p>Fats</p>
          <div class="progress-bar-div">
            <div class="progress-bar-text">{{ userData.dailyNutrients.dailyFats }}/{{ userData.goalFats }}g</div>
            <round-progress [current]="userData.dailyNutrients.dailyFats"
            [max]="userData.goalFats" [color]="'greenyellow'"
            [background]="'#eaeaea'" [radius]="100" [stroke]="20"
            [semicircle]="true" [rounded]="false" [clockwise]="true"
            [responsive]="false" [duration]="800" [animation]="'easeInOutQuart'"
            [animationDelay]="0" />
          </div>
        <!-- <p>
          {{ userData.goalFats - userData.dailyNutrients.dailyFats }}/{{ userData.goalFats }}g fats consumed
        </p> -->
        
        }
      </div>
    </div>
    <div class="foods-eaten-div">
      <div class="foods-list">
        @if (userData.dailyNutrients.mealsList.length > 0) { @for (meal of
        userData.dailyNutrients.mealsList; track meal._id) {
        <div class="foods-list-meal">
          <div class="foods-list-meal-holder">
            <p>{{ meal.foodEaten.name }}</p>
            <div>
              <span class="span-calories">C: {{ meal.caloriesCount }} </span>
              <span class="span-proteins">P: {{ meal.proteinsCount }} </span>
              <span class="span-carbohydrates"
                >C: {{ meal.carbohydratesCount }}
              </span>
              <span class="span-fats">F: {{ meal.fatsCount }}</span>
            </div>
          </div>
          <button
            mat-icon-button
            class="example-icon"
            aria-label="Example icon-button with share icon"
            (click)="onDelete(meal._id, meal.foodEaten.name)"
          >
            <mat-icon>delete</mat-icon>
          </button>
        </div>
        } } @else {
        <div class="empty-foods-list">
          <p>No meals added</p>
        </div>
        }
      </div>
    </div>
  </div>
  }
</div>
